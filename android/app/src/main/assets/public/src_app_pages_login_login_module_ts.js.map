{"version":3,"file":"src_app_pages_login_login_module_ts.js","mappings":"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","sources":["./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { Router, NavigationExtras } from '@angular/router';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { Validators } from '@angular/forms';\nimport { AnimationController, MenuController } from '@ionic/angular';\n\n// Servicios\nimport { SesionService } from '../../services/sesion.service';\nimport { ApiUsuarioService } from 'src/app/services/api-usuario.service';\n\nimport { Platform } from '@ionic/angular';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\n\nexport class LoginPage implements OnInit {\n\n  @ViewChild('logo', { read: ElementRef, static: true }) logo: ElementRef;\n\n  usuario = {\n    correo: \"\",\n    contrasena: \"\"\n  }\n\n  isSubmitted = false;\n\n  errores = [\n    {tipo: 'required', mensaje: 'Campo no debe estar vacio'},\n    {tipo: 'maxLength', mensaje: 'Maximo 15 caracteres'},\n  ]\n  \n  loginForm = new FormGroup({\n    emailForm: new FormControl('',[Validators.required]),\n    passForm: new FormControl('',[Validators.required]),\n  });\n\n  constructor(\n    private router: Router, \n    private animationCtrl: AnimationController,\n    private sesion: SesionService,\n    private api: ApiUsuarioService,\n    private platform: Platform,\n    private menuCtrl: MenuController\n    ) { }\n\n  ngOnInit() {\n    this.api.getUsuarios();\n  }\n\n  ionViewWillEnter(){\n    this.usuario = {\n      correo: \"\",\n      contrasena: \"\"\n    }\n    this.menuCtrl.enable(false);\n    console.log(\"Menu deshabilitado\");\n  }\n\n  ngAfterViewInit() {\n    // Animacion logo\n    const logo = this.animationCtrl.create()\n      .addElement(this.logo.nativeElement)\n      .keyframes([\n        { offset: 0, transform: 'scale(1) rotate(0)' },\n        { offset: 0.5, transform: 'scale(1.5) rotate(0)', opacity: '0.3'  },\n        { offset: 1, transform: 'scale(1) rotate(0)' }\n      ]);\n    const animacion = this.animationCtrl\n      .create()\n      .duration(2000)\n      .iterations(1)\n      .addAnimation([logo]);\n    animacion.play();\n  }\n\n  ionViewWillLeave(){\n    this.menuCtrl.enable(true);\n    console.log(\"Menu habilitado\");\n  }\n\n  // Login\n  datosError = \"Usuario y contraseña no coinciden\"\n  errorBoolean = false;\n\n  login(){\n    this.reinicioErrores();\n    this.validarFormulario();\n  }\n\n  validarFormulario(){\n    if(!this.loginForm.valid){\n      return false;\n    } else {\n      this.validarUsuario();\n    }\n  }\n\n  validarUsuario(){\n    if(this.api.usuarioExiste(this.usuario.correo)){\n      this.validarContrasena();\n    } else {\n      this.errorUsuario();\n    }\n  }\n\n  validarContrasena(){\n    let pass = this.api.consultarContrasena(this.usuario.correo);\n    if(pass == this.usuario.contrasena){\n      this.generarSesion();\n      this.navigateHome();\n    } else {\n      this.errorContrasena();\n    }\n  }\n\n  generarSesion(){\n    let user = this.api.consultarUsuario(this.usuario.correo);\n    this.sesion.guardarSesion(user);\n  }\n\n  navigateHome(){\n    this.router.navigate([\"/home\"]);\n  }\n\n  reinicioErrores(){\n    this.errorBoolean = false;\n    this.isSubmitted = true;\n  }\n\n  errorUsuario(){\n    this.errorBoolean = true;\n    this.datosError = \"Usuario no existe\"\n  }\n\n  errorContrasena(){\n    this.errorBoolean = true;\n    this.datosError = \"Usuario y contraseña no coinciden\"\n  }\n\n}"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}